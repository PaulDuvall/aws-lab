Description: This produces a VPC for a web application

Mappings:
  # Ideally, this should be dynamically generated by following this example:
  # https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/walkthrough-custom-resources-lambda-lookup-amiids.html
  # but that's overkill for the simple exercise that we're doing here.
  #
  # Add more AMI IDs here as needed
  RegionImageIds:
    ap-southeast-1:
      HVM: ami-0c20b8b385217763f  # Ubuntu Server 20.04 LTS (HVM), SSD Volume Type (64-bit x86)

Parameters:
  EnvironmentName:
    Description: The value for this parameter will be prefixed to resources names
    Type:        String

  VpcCIDR:
    Description: A CIDR notation that determines the IP range to be used for this VPC
    Type:        String
    Default:     10.10.0.0/16

Resources:
  VPC:
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock: !Ref VpcCIDR
      Tags:
        - Key:   Name
          Value: !Join
            - ""
            - - Lab-
              - !Ref EnvironmentName
